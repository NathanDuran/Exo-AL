<div class="content">

    <header class="pageHeader">
        <h1>Classify</h1>

        <h2>Star KIC ID: <span id="currentStar"></span> Viewing Light Curve for: <span id="currentLcQuarter"></span></h2> <h2></h2>
    </header>

    <div class="lightcurveContainer"></div>

    <div class="controlBox">
        <ul class="controls">
            <li>
                <button class="button" id="backBtn"><span>Back</span></button>
            </li>
            <li>
                <div class="sliderContainer">
                    <div  id="slider"><div id="handle" class="ui-slider-handle"></div></div>
                </div>
            </li>
            <li>
                <button class="button" id="submitBtn"><span>Submit</span></button>
            </li>
            <li>
                <button class="button" id="nextBtn"><span>Next</span></button>
            </li>
        </ul>
    </div>

    <script>

        $(document).ready(function () {

            getCurrentLc();

            //Slider
            var handle = $("#handle");
            $("#slider").slider({
                min: -100,
                max: 100,
                create: function () {
                    handle.text($(this).slider("value"));
                },
                slide: function (event, ui) {
                    handle.text(ui.value);
                }
            });//End slider
        });

        $(document).on("click", "#submitBtn", function () {
            //submit();
        });
        $(document).on("click", "#nextBtn", function () {
            getNextLc();
        });
        $(document).on("click", "#backBtn", function () {
            getPrevLc();
        });

        function getCurrentLc() {
            $.post("/LcManager", {action: "getCurrentLc"}, function (result) {
                console.log("Current Light Curve" + result);
                //Update text
                setLcText(result)
                //Render light curve
                renderTimeseries(result);
            });
        }//End getCurrentLc

        function getNextLc() {

            $.post("/LcManager", {action: "getNextLc"}, function (result) {
                console.log(result);
                if (!!document.getElementById("canvas")) {
                    document.getElementById("canvas").remove();
                }
                //Update text
                setLcText(result)
                //Render light curve
                renderTimeseries(result);
            });
        }//End getNextLc

        function getPrevLc() {
            $.post("/LcManager", {action: "getPrevLc"}, function (result) {
                console.log(result);
                if (!!document.getElementById("canvas")) {
                    document.getElementById("canvas").remove();
                }
                //Update text
                setLcText(result)
                //Render light curve
                renderTimeseries(result);
            });
        }//End getPrevLc

        //Change text showing which star and light curve quarter is being displayed
        function setLcText(result) {
            document.getElementById("currentStar").innerHTML = result.split("/")[3];
            document.getElementById("currentLcQuarter").innerHTML = result.split("_")[1].split(".")[0];
        }//End setLcText
    </script>
</div>